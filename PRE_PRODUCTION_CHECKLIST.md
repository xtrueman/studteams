# Pre-Production Checklist –¥–ª—è StudTeams

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### –ö–æ–¥ –∏ –∫–∞—á–µ—Å—Ç–≤–æ
- [x] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (28/28)
- [x] Flake8 —á–∏—Å—Ç—ã–π
- [x] Ruff —á–∏—Å—Ç—ã–π
- [x] –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ
- [x] SQL-–∑–∞–ø—Ä–æ—Å—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ã (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π)
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ loguru
- [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —á–∏—Å—Ç–∞—è (src/bot, src/web)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [x] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è connection pooling —á–µ—Ä–µ–∑ myconn
- [x] Autocommit –≤–∫–ª—é—á–µ–Ω
- [x] –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- [x] –¢–µ—Å—Ç–æ–≤–∞—è –∏ prod –ë–î —Ä–∞–∑–¥–µ–ª–µ–Ω—ã

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [x] –°–µ–∫—Ä–µ—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ secrets.yaml (–Ω–µ –≤ git)
- [x] –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ prod/test –æ–∫—Ä—É–∂–µ–Ω–∏–π
- [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–¥–µ–ª–∞—Ç—å

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

1. **–ó–∞–≤–µ—Ä—à–∏—Ç—å TODO –≤ callbacks.py**
   ```python
   # TODO: Implement member editing functionality
   ```
   –†–µ—à–µ–Ω–∏–µ: –õ–∏–±–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å, –ª–∏–±–æ —É–±—Ä–∞—Ç—å –∫–Ω–æ–ø–∫—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

2. **–î–æ–±–∞–≤–∏—Ç—å health-check endpoint –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞**
   ```python
   # src/web/app.py
   @app.get("/health")
   async def health_check():
       return {"status": "healthy", "version": "1.0.0"}
   ```

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å graceful shutdown**
   - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–∏–≥–Ω–∞–ª–æ–≤ SIGTERM/SIGINT
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ë–î —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

4. **–î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è –±–æ—Ç–∞**
   - –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

5. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ë–î**
   ```python
   # –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ–µ–≤
   # –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ë–î –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª
   ```

6. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –ë–î
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫

7. **–°–æ–∑–¥–∞—Ç—å systemd service —Ñ–∞–π–ª—ã**
   ```ini
   [Unit]
   Description=StudTeams Bot
   After=network.target mysql.service

   [Service]
   Type=simple
   User=studteams
   WorkingDirectory=/path/to/studteams
   Environment="PYTHONPATH=/path/to/studteams/src"
   ExecStart=/usr/bin/python3 /path/to/studteams/src/bot/main.py
   Restart=always

   [Install]
   WantedBy=multi-user.target
   ```

8. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production**
   - –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è errors
   - –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

9. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - Prometheus metrics endpoint
   - Grafana dashboard
   - Alertmanager –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

10. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î**
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –ø–æ–ª—è—Ö
    - EXPLAIN –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    - –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–µ–¥–∫–æ –º–µ–Ω—è—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö

11. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
    - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å API endpoints
    - –°–æ–∑–¥–∞—Ç—å troubleshooting guide

12. **Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è**
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup –ë–î
    - Backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    - –ü–ª–∞–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

## üöÄ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π production checklist

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å production secrets.yaml
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ë–î (—Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç–∞–±–ª–∏—Ü—ã)
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
5. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ production –æ–∫—Ä—É–∂–µ–Ω–∏–∏
6. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ (systemd/supervisor)
7. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
8. ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É rollback

## üìù –ó–∞–º–µ—Ç–∫–∏

### –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –ë–î –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- mysql-connector-python 8.3.0 (—Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å MySQL 8.4+)
- –ù–ï –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–æ 9.x –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!

### –õ–æ–≥–∏
- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `logs/studteams.log`
- –†–æ—Ç–∞—Ü–∏—è: 10 MB
- –•—Ä–∞–Ω–µ–Ω–∏–µ: 1 –º–µ—Å—è—Ü

### –ü–æ—Ä—Ç—ã
- Web: 8000 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ run_web.py)
- MySQL: 3306 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤ git
- SQL –∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ helpers.py

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å firewall (—Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ—Ä—Ç—ã)
- HTTPS –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (nginx reverse proxy)
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–ø—ã—Ç–æ–∫ –∞—Ç–∞–∫
